#!/bin/sh

run() {
    if ! pgrep "$1" > /dev/null ;
    then
        "$@"&
    fi
}

# /usr/bin/prime-offload
# multi-monitor
multi-hybrid-graphics
xrdb -merge ~/.config/x11/Xresources
run safeeyes -e &
run remaps &
run clipmenud &
run redshift &
run /usr/bin/emacs --daemon &
run syncthing-gtk --minimized &
run flashfocus &

autostart="dunst lxsession nm-applet picom pipewire mpd"
for program in $autostart; do
    pidof -s "$program" || setsid -f "$program"
done >/dev/null 2>&1

run "$HOME"/.fehbg &
sleep 5 && run volctl && mictray &
