#!/bin/sh

# A dmenu wrapper script for system functions.
case "$(readlink -f /sbin/init)" in
	*systemd*) ctl='systemctl' ;;
	*) ctl='loginctl' ;;
esac

case "$(printf " Lock\nﴚ Leave dusk\n Renew dusk\n Refresh keybindings\n⏾ Hibernate\n鈴 Sleep\nﰇ Reboot\n Shutdown\nﯥ Display off\n" | dmenu -p 'Action: ' -bw 2 -l 9)" in
	' Lock') slock ;;
	'ﴚ Leave dusk') kill -TERM "$(pgrep -u "$USER" "\bdusk$")" ;;
	' Renew dusk') kill -HUP "$(pgrep -u "$USER" "\bdusk$")" ;;
	' Refresh keybindings') killall -q shotkey && setsid -f shotkey ;;
	'⏾ Hibernate') slock $ctl hibernate ;;
	'鈴 Sleep') slock $ctl suspend ;;
	'ﰇ Reboot') $ctl reboot ;;
	' Shutdown') $ctl poweroff ;;
	'ﯥ Display off') xset dpms force off ;;
	*) exit 1 ;;
esac
